# Garminæ•°æ®åŒæ­¥å®Œæ•´æŒ‡å—

## åŒæ­¥è¿‡å»ä¸¤å¹´çš„æ•°æ®

### æ–¹æ³•1ï¼šå®Œæ•´åŒæ­¥ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰

åŒæ­¥è¿‡å»2å¹´çš„æ‰€æœ‰æ•°æ®ï¼š

```bash
cd backend
source venv/bin/activate
python scripts/sync_garmin_full.py itsoso@126.com Sisi1124 1 2
```

**å‚æ•°è¯´æ˜ï¼š**
- `itsoso@126.com` - Garmin Connecté‚®ç®±
- `Sisi1124` - Garmin Connectå¯†ç 
- `1` - user_id
- `2` - åŒæ­¥è¿‡å»2å¹´çš„æ•°æ®

**ç‰¹ç‚¹ï¼š**
- âœ… æ˜¾ç¤ºè¯¦ç»†è¿›åº¦
- âœ… æ˜¾ç¤ºé¢„è®¡å‰©ä½™æ—¶é—´
- âœ… æ¯10å¤©æ˜¾ç¤ºä¸€æ¬¡ç»Ÿè®¡
- âœ… æ”¯æŒCtrl+Cä¸­æ–­ï¼ˆå·²åŒæ­¥çš„æ•°æ®ä¼šä¿å­˜ï¼‰
- â±ï¸ é¢„è®¡è€—æ—¶ï¼šçº¦ 730å¤© Ã— 0.8ç§’ â‰ˆ 10åˆ†é’Ÿ

### æ–¹æ³•2ï¼šæ–­ç‚¹ç»­ä¼ ï¼ˆæ¨èè¡¥å……æ•°æ®ï¼‰

åªåŒæ­¥ç¼ºå¤±çš„æ—¥æœŸï¼š

```bash
python scripts/sync_garmin_resume.py itsoso@126.com Sisi1124 1 2
```

**ç‰¹ç‚¹ï¼š**
- âœ… è‡ªåŠ¨æ£€æŸ¥å·²æœ‰æ•°æ®
- âœ… åªåŒæ­¥ç¼ºå¤±çš„æ—¥æœŸ
- âœ… é€‚åˆä¸­æ–­åç»§ç»­
- âœ… é€‚åˆå®šæœŸè¡¥å……æ–°æ•°æ®

### æ–¹æ³•3ï¼šä½¿ç”¨åŸå§‹è„šæœ¬ï¼ˆåŒæ­¥æœ€è¿‘Nå¤©ï¼‰

```bash
python scripts/sync_garmin.py itsoso@126.com Sisi1124 1 730
```

åŒæ­¥æœ€è¿‘730å¤©ï¼ˆçº¦2å¹´ï¼‰çš„æ•°æ®ã€‚

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. åˆ†æ‰¹åŒæ­¥

å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œå¯ä»¥åˆ†æ‰¹åŒæ­¥ï¼š

```bash
# å…ˆåŒæ­¥æœ€è¿‘1å¹´
python scripts/sync_garmin_full.py email password 1 1

# å†åŒæ­¥å‰ä¸€å¹´
# éœ€è¦ä¿®æ”¹è„šæœ¬ä¸­çš„æ—¥æœŸè®¡ç®—ï¼Œæˆ–æ‰‹åŠ¨æŒ‡å®šæ—¥æœŸèŒƒå›´
```

### 2. åå°è¿è¡Œ

ä½¿ç”¨ `nohup` æˆ– `screen` åœ¨åå°è¿è¡Œï¼š

```bash
# ä½¿ç”¨nohup
nohup python scripts/sync_garmin_full.py email password 1 2 > sync.log 2>&1 &

# æŸ¥çœ‹è¿›åº¦
tail -f sync.log
```

### 3. ä½¿ç”¨screenï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨screenä¼šè¯
screen -S garmin_sync

# è¿è¡ŒåŒæ­¥
python scripts/sync_garmin_full.py email password 1 2

# æŒ‰ Ctrl+A ç„¶å D åˆ†ç¦»ä¼šè¯
# é‡æ–°è¿æ¥: screen -r garmin_sync
```

## åŒæ­¥è¿›åº¦è¯´æ˜

åŒæ­¥è¿‡ç¨‹ä¸­ä¼šæ˜¾ç¤ºï¼š

```
[45.2%] 2024-06-15 - é¢„è®¡å‰©ä½™: 8åˆ†30ç§’ - âœ… æˆåŠŸ
```

- `[45.2%]` - å®Œæˆç™¾åˆ†æ¯”
- `2024-06-15` - å½“å‰åŒæ­¥çš„æ—¥æœŸ
- `é¢„è®¡å‰©ä½™` - é¢„è®¡å‰©ä½™æ—¶é—´
- `âœ… æˆåŠŸ` / `âš ï¸ æ— æ•°æ®` / `âŒ é”™è¯¯` - åŒæ­¥çŠ¶æ€

## åŒæ­¥ç»“æœ

åŒæ­¥å®Œæˆåä¼šæ˜¾ç¤ºï¼š

```
============================================================
åŒæ­¥å®Œæˆ!
============================================================
âœ… æˆåŠŸ: 650 æ¡
âš ï¸  æ— æ•°æ®: 50 å¤©
âŒ é”™è¯¯: 30 å¤©
â±ï¸  æ€»è€—æ—¶: 12åˆ†35ç§’
ğŸ“ˆ å¹³å‡é€Ÿåº¦: 58.2 å¤©/åˆ†é’Ÿ
```

## å¸¸è§é—®é¢˜

### Q: åŒæ­¥éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ

A: 
- æ¯å¤©æ•°æ®çº¦éœ€ 0.8-1 ç§’
- 2å¹´ï¼ˆ730å¤©ï¼‰çº¦éœ€ 10-12 åˆ†é’Ÿ
- å®é™…æ—¶é—´å–å†³äºç½‘ç»œé€Ÿåº¦å’ŒGarminæœåŠ¡å™¨å“åº”

### Q: å¯ä»¥ä¸­æ–­å—ï¼Ÿ

A: å¯ä»¥ã€‚æŒ‰ `Ctrl+C` ä¸­æ–­ï¼Œå·²åŒæ­¥çš„æ•°æ®ä¼šä¿å­˜ã€‚å¯ä»¥ä½¿ç”¨æ–­ç‚¹ç»­ä¼ è„šæœ¬ç»§ç»­åŒæ­¥å‰©ä½™æ•°æ®ã€‚

### Q: å¦‚ä½•çŸ¥é“å“ªäº›æ—¥æœŸæœ‰æ•°æ®ï¼Ÿ

A: ä½¿ç”¨APIæ£€æŸ¥ï¼š

```bash
curl "http://localhost:8000/api/v1/data-collection/garmin/sync-status/1?days=730"
```

### Q: åŒæ­¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: 
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤Garminè´¦å·æ­£å¸¸
3. ä½¿ç”¨æ–­ç‚¹ç»­ä¼ è„šæœ¬é‡è¯•å¤±è´¥çš„æ—¥æœŸ
4. æŸ¥çœ‹é”™è¯¯æ—¥å¿—äº†è§£å…·ä½“åŸå› 

### Q: å¦‚ä½•åªåŒæ­¥ç‰¹å®šæ—¥æœŸèŒƒå›´ï¼Ÿ

A: å¯ä»¥ä¿®æ”¹è„šæœ¬ä¸­çš„æ—¥æœŸè®¡ç®—ï¼Œæˆ–ä½¿ç”¨APIï¼š

```bash
curl -X POST "http://localhost:8000/api/v1/garmin-connect/connect/sync" \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": 1,
    "start_date": "2023-01-01",
    "end_date": "2023-12-31",
    "email": "your_email@garmin.com",
    "password": "your_password"
  }'
```

## æ•°æ®éªŒè¯

åŒæ­¥å®Œæˆåï¼ŒéªŒè¯æ•°æ®ï¼š

```bash
# æŸ¥çœ‹åŒæ­¥çŠ¶æ€
curl "http://localhost:8000/api/v1/data-collection/garmin/sync-status/1?days=730"

# æŸ¥çœ‹æœ€è¿‘çš„æ•°æ®
curl "http://localhost:8000/api/v1/daily-health/garmin/user/1?limit=10"

# è¿›è¡Œæ•°æ®åˆ†æ
curl "http://localhost:8000/api/v1/garmin-analysis/user/1/comprehensive?days=30"
```

## å®šæ—¶åŒæ­¥

è®¾ç½®æ¯å¤©è‡ªåŠ¨åŒæ­¥æ–°æ•°æ®ï¼š

```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ ï¼ˆæ¯å¤©å‡Œæ™¨3ç‚¹åŒæ­¥æ˜¨æ—¥æ•°æ®ï¼‰
0 3 * * * cd /path/to/backend && source venv/bin/activate && python scripts/sync_garmin_resume.py email password user_id 1
```

## æ³¨æ„äº‹é¡¹

1. **è´¦å·å®‰å…¨**ï¼šä¸è¦åœ¨è„šæœ¬ä¸­ç¡¬ç¼–ç å¯†ç ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡
2. **è¯·æ±‚é¢‘ç‡**ï¼šä»£ç ä¸­å·²æ·»åŠ å»¶è¿Ÿï¼Œé¿å…è¯·æ±‚è¿‡å¿«
3. **æ•°æ®å®Œæ•´æ€§**ï¼šæŸäº›æ—¥æœŸå¯èƒ½æ²¡æœ‰æ•°æ®ï¼ˆè®¾å¤‡æœªä½©æˆ´ç­‰ï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸çš„
4. **ç½‘ç»œç¨³å®šæ€§**ï¼šç¡®ä¿ç½‘ç»œç¨³å®šï¼Œé¿å…é¢‘ç¹ä¸­æ–­

