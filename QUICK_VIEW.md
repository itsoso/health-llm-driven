# 快速查看Garmin数据指南

## 🚀 快速开始

### 1. 启动服务

**后端服务**（如果还没启动）：
```bash
cd backend
source venv/bin/activate
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**前端服务**（如果还没启动）：
```bash
cd frontend
npm run dev
```

### 2. 访问数据页面

打开浏览器，访问：
- **Garmin数据页面**: http://localhost:3000/garmin
- **健康仪表盘**: http://localhost:3000/dashboard
- **首页**: http://localhost:3000

## 📊 查看数据的方式

### 方式1：Garmin数据页面（最详细）

访问 **http://localhost:3000/garmin**

这个页面提供：
- ✅ **原始数据视图**：趋势图、柱状图、详细表格
- ✅ **睡眠分析**：睡眠质量评估和建议
- ✅ **心率分析**：心率健康评估
- ✅ **身体电量**：能量水平分析
- ✅ **活动分析**：步数、卡路里统计
- ✅ **综合分析**：所有指标汇总

**操作步骤**：
1. 选择查看范围（7天、30天、90天等）
2. 点击顶部标签页切换不同视图
3. 查看图表和数据表格

### 方式2：健康仪表盘（概览）

访问 **http://localhost:3000/dashboard**

这个页面提供：
- ✅ 关键指标卡片（睡眠、步数、心率、身体电量）
- ✅ 基础健康数据（身高、体重、BMI、血压）
- ✅ 趋势图表（最近14天）
- ✅ 快速链接到其他功能

### 方式3：API直接访问

**查看原始数据**：
```bash
curl "http://localhost:8000/api/v1/daily-health/garmin/user/1?start_date=2024-01-01&end_date=2024-12-31"
```

**查看睡眠分析**：
```bash
curl "http://localhost:8000/api/v1/garmin-analysis/user/1/sleep?days=30"
```

**查看同步状态**：
```bash
curl "http://localhost:8000/api/v1/data-collection/garmin/sync-status/1?days=30"
```

### 方式4：API文档（交互式）

访问 **http://localhost:8000/docs**

在Swagger UI中：
1. 找到 `/garmin-analysis` 或 `/daily-health` 相关端点
2. 点击 "Try it out"
3. 输入参数（user_id, days等）
4. 点击 "Execute" 查看结果

## 📈 数据可视化说明

### 图表类型

1. **趋势图（LineChart）**
   - 显示睡眠分数、心率、步数随时间的变化
   - 可以同时显示多个指标

2. **柱状图（BarChart）**
   - 显示步数统计
   - 便于比较不同日期的活动量

3. **指标卡片**
   - 显示关键健康指标的平均值
   - 快速了解整体健康状况

4. **数据表格**
   - 显示每日详细数据
   - 支持排序和筛选（未来功能）

## 🔍 数据范围选择

在Garmin数据页面，可以选择查看：
- **最近7天**：查看短期趋势
- **最近30天**：查看月度趋势（推荐）
- **最近90天**：查看季度趋势
- **最近180天**：查看半年趋势
- **最近1年**：查看年度趋势
- **最近2年**：查看长期趋势

## 📱 功能说明

### 原始数据视图

- **数据趋势图**：睡眠分数、平均心率、步数
- **步数统计**：每日步数柱状图
- **详细数据表格**：包含所有字段的完整数据

### 睡眠分析

- **平均睡眠分数**：0-100分
- **平均睡眠时长**：小时数
- **深度睡眠**：分钟数
- **REM睡眠**：分钟数
- **质量评估**：优秀/良好/一般/较差
- **个性化建议**：基于数据的改进建议

### 心率分析

- **平均心率**：bpm
- **静息心率**：bpm
- **心率变异性(HRV)**：ms
- **健康评估**：基于年龄和活动水平

### 身体电量

- **平均充电值**：0-100
- **平均消耗值**：0-100
- **最高值**：峰值
- **最低值**：低谷

### 活动分析

- **平均步数/天**：是否符合WHO建议（10000步）
- **总步数**：选定范围内的总步数
- **平均活动分钟**：每日活动时间
- **卡路里消耗**：总消耗量

### 综合分析

汇总所有指标，提供整体健康评估。

## ⚠️ 常见问题

### Q: 页面显示"暂无数据"

**原因**：
1. 还没有同步过Garmin数据
2. 选择的日期范围内没有数据

**解决方法**：
1. 先同步数据（参考 `GARMIN_CONNECT_INTEGRATION.md`）
2. 调整日期范围
3. 检查同步状态API

### Q: 图表不显示

**原因**：
1. 数据格式问题
2. 日期范围选择不当
3. 浏览器兼容性问题

**解决方法**：
1. 检查浏览器控制台错误
2. 尝试不同的日期范围
3. 使用Chrome或Firefox浏览器

### Q: 数据不准确

**原因**：
1. Garmin设备数据未同步
2. 数据解析错误

**解决方法**：
1. 确认Garmin Connect中有数据
2. 重新同步数据
3. 检查API返回的原始数据

## 🎯 下一步

1. **定期同步**：设置定时任务自动同步Garmin数据
2. **数据分析**：使用分析API获取健康建议
3. **目标设置**：基于分析结果设置健康目标
4. **健康打卡**：结合每日打卡数据，获得更全面的健康分析

## 📚 相关文档

- **完整数据查看指南**: `VIEW_DATA.md`
- **Garmin集成文档**: `backend/GARMIN_CONNECT_INTEGRATION.md`
- **运行指南**: `RUN.md`
- **API文档**: http://localhost:8000/docs

